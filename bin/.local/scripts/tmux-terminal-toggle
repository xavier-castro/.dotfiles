#!/usr/bin/env bash

# Toggle floating terminal in a tmux popup
# If terminal popup is already open, close it
# If not open, create a new one

POPUP_NAME="terminal-popup"

# Check if terminal popup session exists
if tmux has-session -t "$POPUP_NAME" 2>/dev/null; then
    # If session exists, kill it (closes the popup)
    tmux kill-session -t "$POPUP_NAME"
else
    # If session doesn't exist, create popup with new session
    tmux display-popup -d '#{pane_current_path}' -w95% -h95% -S "$POPUP_NAME" -E "tmux new-session -d -s '$POPUP_NAME'; tmux attach-session -t '$POPUP_NAME'"
fi